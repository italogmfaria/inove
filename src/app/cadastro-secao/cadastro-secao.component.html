<div class="secao-panel">
  <!-- Header -->
  <header class="header">
    <button class="back-btn" onclick="window.history.back();">Voltar</button>
    <img src="assets/logowhite.png" alt="Logotipo INOVE" class="logo">
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <h1>Seções do Curso</h1>

    <!-- Lista de Seções -->
    <div class="sections-list">
      <div class="section-item" *ngFor="let secao of secoes; let i = index">
        <!-- Header da Seção -->
        <div class="section-header">
          <span>Seção {{ i + 1 }}: {{ secao.title }}</span>
          <div class="section-actions">
            <button class="btn-blue" (click)="editarSecao(secao)">Atualizar Seção</button>
            <button class="btn-red" (click)="excluirSecao(secao.id)">Excluir Seção</button>
            <button class="expand-btn" [class.expanded]="secao.isOpen" (click)="toggleSection(i)">&#9662;</button>
          </div>
        </div>

        <!-- Detalhes da Seção -->
        <div class="section-details" *ngIf="secao.isOpen">
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>Tipo</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let conteudo of secao.contents">
                <td>{{ conteudo.title }}</td>
                <td>{{ conteudo.contentType && conteudo.contentType.includes('video') ? 'Vídeo' : 'Teórico' }}</td>
                <td>
                  <div class="button-group">
                    <button class="btn-blue" (click)="editarConteudo(conteudo)">Atualizar</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
          <button class="btn-orange" (click)="adicionarConteudo(secao.id)">Novo Conteúdo</button>
        </div>
      </div>
    </div>

    <!-- Botão Criar Nova Seção -->
    <button class="btn-large-orange" (click)="criarNovaSecao()">Criar Nova Seção</button>
  </main>

  <!-- Modal para Atualizar Seção -->
  <div class="modal-overlay" *ngIf="showEditSecaoModal" (click)="closeEditSecaoModal()"></div>
  <div class="modal" *ngIf="showEditSecaoModal">
    <header class="modal-header">
      <h2>Atualizar Seção</h2>
      <span class="close-btn" (click)="closeEditSecaoModal()">&#10005;</span>
    </header>
    <div class="modal-body">
      <input type="text" [(ngModel)]="secaoEdit.title" placeholder="Nome da Seção" />
    </div>
    <footer class="modal-footer">
      <button class="btn-orange" (click)="salvarEdicaoSecao()">Salvar</button>
    </footer>
  </div>

<!-- Modal para Conteúdo -->
<div class="modal" *ngIf="showContentModal">
  <header class="modal-header">
    <h2>{{ editingContent ? 'Atualizar Conteúdo' : 'Criar Conteúdo' }}</h2>
    <span class="close-btn" (click)="closeContentModal()">&#10005;</span>
  </header>
  <div class="modal-body">
    <input type="text" [(ngModel)]="currentContent.title" placeholder="Nome do conteúdo" />
    <input type="text" [(ngModel)]="currentContent.description" placeholder="Descrição" />
    <select [(ngModel)]="currentContent.contentType">
      <option [value]="ContentType.VIDEO">Vídeo</option>
      <option [value]="ContentType.PDF">Teórico</option>
    </select>
    <input type="file" (change)="handleFileUpload($event)" accept="video/*,application/pdf" />
    <div class="upload-progress" *ngIf="uploadProgress > 0 && uploadProgress < 100">
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="uploadProgress"></div>
      </div>
      <p>Enviando: {{ uploadProgress }}%</p>
    </div>
  </div>    
  <footer class="modal-footer">
    <button class="btn-orange" (click)="saveContent()" [disabled]="isUploading">
      <span *ngIf="isUploading">Enviando...</span>
      <span *ngIf="!isUploading">{{ editingContent ? 'Atualizar Conteúdo' : 'Criar Conteúdo' }}</span>
    </button>
  </footer>    
</div>
</div>
